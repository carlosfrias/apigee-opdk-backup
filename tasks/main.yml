---
# tasks file for apigee-opdk-backup
- name: Stop component if it is not Postgres
  shell: '{{ apigee_service }} {{ component_name }} stop'
  when: component_name != 'apigee-postgresql' or component_name != 'all'

- name: Start component if it is Postgres
  shell: '{{ apigee_service }} {{ component_name }} start'
  when: component_name == 'apigee-postgresql'

- name: Backup component {{ component_name }}
  shell: '{{ apigee_service }} {{ component_name }} backup'
  when: component_name != 'all'

- name: Backup component {{ component_name }}
  shell: '{{ apigee_all }} backup'
  when: component_name == 'all'

- name: Start component {{ component_name }}
  shell: '{{ apigee_service }} {{ component_name }} start'
  when: component_name != 'all'
